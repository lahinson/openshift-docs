:_mod-docs-content-type: REFERENCE
[id="hcp-release-notes-fixed-issues_{context}"]
= Fixed issues

The following issues are fixed for this release:

* Before this update, deploying a hosted control plane on OpenShift Virtualization with IPv4 or IPv6 dual-stack networking failed because the Cluster Network Operator did not recognize KubeVirt as a supported platform for dual-stack. As a consequence, hosted clusters could not be deployed on OpenShift Virtualization with dual-stack networking. With this release, support is added for deploying a hosted control plane on OpenShift Virtualization with KubeVirt. The Cluster Network Operator (CNO) now recognizes KubeVirt as a supported platform for dual-stack, which enables the successful deployment of hosted control planes with IPv4/IPv6 dual-stack networking. This enhancement ensures a smoother deployment process for dual-stack networking configurations. (link:https://issues.redhat.com/browse/OCPBUGS-69941[OCPBUGS-69941])

* Before this update, the `GenerateNodePools()` function of the CLI incorrectly set `AzureMarketplace` to `nil` when you specified the `--image-generation` flag without additional marketplace flags, which discarded your preference. Also, the `nodepool` controller failed to set `ImageGeneration` when creating images from the release payload, which caused them to default to Gen2. As a consequence, when users attempted to create Azure hosted clusters by using `--image-generation` Gen1, the `NodePools` were incorrectly provisioned with Gen2 images, which ignored the explicit configuration. With this release, the CLI is modified to preserve your preference by creating a proper `AzureMarketplaceImage` structure, and the `nodepool` controller explicitly sets the generation field based on the release payload (mapping Gen1 for HyperVGen1 and Gen2 for HyperVGen2). As a result, the` --image-generation` flag is now fully respected, which allows you to successfully deploy `NodePool` objects with their chosen image generation without being overwritten by system defaults. (link:https://issues.redhat.com/browse/OCPBUGS-63613[OCPBUGS-63613])

* Before this update, when a hosted cluster used external Domain Name Service (DNS) domains and endpoint access with PublicAndPrivate, the `allowedCIDRBlocks` parameters were incorrectly applied only to the internal `kube-apiserver`, which left the control plane operator in an error state. With this release, the control plane operator functions correctly and the `LoadBalancerSourceRanges` configuration is added to the external router `LoadBalancer` service. As a result, the external `kube-apiserver` access is properly restricted to the specified `allowedCIDRBlocks` parameter. (link:https://issues.redhat.com/browse/OCPBUGS-61941[OCPBUGS-61941])

* Before this update, deploying hosted control planes 4.20 with user-supplied `ignition-server-serving-cert` and `ignition-server-ca-cert secrets`, along with the `disable-pki-reconciliation` annotation, caused the system to remove the user-supplied ignition secrets and the `ignition-server` pods to fail. With this release, the `ignition-server` secrets are preserved during reconciliation after removing the delete action for the `disable-pki-reconciliation` annotation, ensuring that the `ignition-server` pods start up completely. (link:https://issues.redhat.com/browse/OCPBUGS-61776[OCPBUGS-61776])

* Before this update, the hosted control plane (`hcp`) CLI instantiated Azure SDK clients without passing cloud configuration options, which caused all clients to default to Azure Public Cloud. As a consequence, hosted clusters that were created or managed in Azure Government Cloud or Azure China Cloud failed because the Azure SDK clients could not connect to the correct cloud endpoints. With this release, a `GetAzureCloudConfiguration()` helper function is added to convert cloud names to Azure SDK cloud configurations. All Azure SDK client instantiations have also been updated across 15 locations in the `hcp` CLI and control-plane-operator to use proper cloud configuration from `HostedCluster.Spec.Platform.Azure.Cloud` (for cluster commands and control-plane-operator). As a result, the `hcp` CLI and `control-plane-operator` correctly support creating and managing hosted clusters in Azure Government Cloud and Azure China Cloud in addition to Azure Public Cloud. (link:https://issues.redhat.com/browse/OCPBUGS-33372[OCPBUGS-33372])